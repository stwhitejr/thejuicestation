!function(e,t,n,o,r,a){function i(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function s(e,t){return!("object"!=typeof e[t]||!e[t])}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!w(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var n=navigator.plugins[e].description;n&&!w(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(C=n.match(/\d+/g))}if(!C){var o;try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),C=Array.prototype.slice.call(o.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),o=null}catch(e){}}if(!C)return!1;var r=parseInt(C[0],10),a=parseInt(C[1],10);return S=r>9&&a>0,!0}function u(){if(!V){V=!0,W("firing dom_onReady");for(var e=0;e<z.length;e++)z[e]();z.length=0}}function f(e,t){if(V)return void e.call(t);z.push(function(){e.call(t)})}function d(){var e=parent;if(""!==j)for(var t=0,n=j.split(".");t<n.length;t++){if(!e)throw new Error(n.slice(0,t+1).join(".")+" is not an object");e=e[n[t]]}if(!e||!e.easyXDM)throw new Error("Could not find easyXDM in parent."+j);return e.easyXDM}function p(t){if("string"!=typeof t||!t)throw new Error("namespace must be a non-empty string");return W("Settings namespace to '"+t+"'"),e.easyXDM=U,j=t,j&&(X="easyXDM_"+j.replace(".","_")+"_"),L}function h(e){if(!e)throw new Error("url is undefined or empty");return e.match(I)[3]}function g(e){if(!e)throw new Error("url is undefined or empty");return e.match(I)[4]||""}function m(e){if(!e)throw new Error("url is undefined or empty");if(/^file/.test(e))throw new Error("The file:// protocol is not supported");var t=e.toLowerCase().match(I)||[],n=t[2]||"",o=t[3]||"",r=t[4]||"";return("http:"==n&&":80"==r||"https:"==n&&":443"==r)&&(r=""),n+"//"+o+r}function v(e){if(!e)throw new Error("url is undefined or empty");if(e=e.replace(H,"$1/"),!e.match(/^(http||https):\/\//)){var t="/"===e.substring(0,1)?"":n.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=n.protocol+"//"+n.host+t+e}for(;F.test(e);)e=e.replace(F,"");return W("resolved url '"+e+"'"),e}function y(e,t){if(!t)throw new Error("parameters is undefined or null");var n="",o=e.indexOf("#");-1!==o&&(n=e.substring(o),e=e.substring(0,o));var r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i+"="+a(t[i]));return e+(q?"#":-1==e.indexOf("?")?"?":"&")+r.join("&")+n}function w(e){return void 0===e}function b(e,t,n){var o;for(var r in t)t.hasOwnProperty(r)&&(r in e?(o=t[r],"object"==typeof o?b(e[r],o,n):n||(e[r]=t[r])):e[r]=t[r]);return e}function k(){var e=t.body.appendChild(t.createElement("form")),n=e.appendChild(t.createElement("input"));n.name=X+"TEST"+A,D=n!==e.elements[n.name],t.body.removeChild(e),W("HAS_NAME_PROPERTY_BUG: "+D)}function E(e){W("creating frame: "+e.props.src),w(D)&&k();var n;D?n=t.createElement('<iframe name="'+e.props.name+'"/>'):(n=t.createElement("IFRAME"),n.name=e.props.name),n.id=n.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=t.getElementById(e.container)),e.container||(b(n.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=t.body);var o=e.props.src;if(e.props.src="javascript:false",b(n,e.props),n.border=n.frameBorder=0,n.allowTransparency=!0,n.tabIndex=-1,e.container.appendChild(n),e.onLoad&&N(n,"load",e.onLoad),e.usePost){var r,a=e.container.appendChild(t.createElement("form"));if(a.target=n.name,a.action=o,a.method="POST","object"==typeof e.usePost)for(var i in e.usePost)e.usePost.hasOwnProperty(i)&&(D?r=t.createElement('<input name="'+i+'"/>'):(r=t.createElement("INPUT"),r.name=i),r.value=e.usePost[i],a.appendChild(r));a.submit(),a.parentNode.removeChild(a)}else n.src=o;return e.props.src=o,n}function x(e,t){"string"==typeof e&&(e=[e]);for(var n,o=e.length;o--;)if(n=e[o],n=new RegExp("^"==n.substr(0,1)?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),n.test(t))return!0;return!1}function _(o){var r,a=o.protocol;if(o.isHost=o.isHost||w($.xdm_p),q=o.hash||!1,W("preparing transport stack"),o.props||(o.props={}),o.isHost)o.remote=v(o.remote),o.channel=o.channel||"default"+A++,o.secret=Math.random().toString(16).substring(2),w(a)?(a=m(n.href)==m(o.remote)?"4":i(e,"postMessage")||i(t,"postMessage")?"1":o.swf&&i(e,"ActiveXObject")&&l()?"6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?"5":o.remoteHelper?"2":"0",W("selecting protocol: "+a)):W("using protocol: "+a);else if(W("using parameters from query"),o.channel=$.xdm_c.replace(/["'<>\\]/g,""),o.secret=$.xdm_s,o.remote=$.xdm_e.replace(/["'<>\\]/g,""),a=$.xdm_p,o.acl&&!x(o.acl,o.remote))throw new Error("Access denied for "+o.remote);switch(o.protocol=a,a){case"0":if(b(o,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),o.isHost){if(!o.local){W("looking for image to use as local");for(var s,c=n.protocol+"//"+n.host,u=t.body.getElementsByTagName("img"),f=u.length;f--;)if(s=u[f],s.src.substring(0,c.length)===c){o.local=s.src;break}o.local||(W("no image found, defaulting to using the window"),o.local=e)}var d={xdm_c:o.channel,xdm_p:0};o.local===e?(o.usePolling=!0,o.useParent=!0,o.local=n.protocol+"//"+n.host+n.pathname+n.search,d.xdm_e=o.local,d.xdm_pa=1):d.xdm_e=v(o.local),o.container&&(o.useResize=!1,d.xdm_po=1),o.remote=y(o.remote,d)}else b(o,{useParent:!w($.xdm_pa),usePolling:!w($.xdm_po),useResize:!o.useParent&&o.useResize});r=[new L.stack.HashTransport(o),new L.stack.ReliableBehavior({}),new L.stack.QueueBehavior({encode:!0,maxLength:4e3-o.remote.length}),new L.stack.VerifyBehavior({initiate:o.isHost})];break;case"1":r=[new L.stack.PostMessageTransport(o)];break;case"2":o.isHost&&(o.remoteHelper=v(o.remoteHelper)),r=[new L.stack.NameTransport(o),new L.stack.QueueBehavior,new L.stack.VerifyBehavior({initiate:o.isHost})];break;case"3":r=[new L.stack.NixTransport(o)];break;case"4":r=[new L.stack.SameOriginTransport(o)];break;case"5":r=[new L.stack.FrameElementTransport(o)];break;case"6":C||l(),r=[new L.stack.FlashTransport(o)]}return r.push(new L.stack.QueueBehavior({lazy:o.lazy,remove:!0})),r}function O(e){for(var t,n={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},o=0,r=e.length;o<r;o++)t=e[o],b(t,n,!0),0!==o&&(t.down=e[o-1]),o!==r-1&&(t.up=e[o+1]);return t}function T(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}function M(){return e.cloudsponge&&"true"===cloudsponge.scriptLocation.queryParams.debug||n.search.match(/debug=(true|1)/)}var D,C,S,N,R,P=this,A=Math.floor(1e4*Math.random()),B=Function.prototype,I=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,F=/[\-\w]+\/\.\.\//,H=/([^:])\/\//g,j="",L={},U=e.easyXDM,X="easyXDM_",q=!1,W=B;if(i(e,"addEventListener"))N=function(e,t,n){W("adding listener "+t),e.addEventListener(t,n,!1)},R=function(e,t,n){W("removing listener "+t),e.removeEventListener(t,n,!1)};else{if(!i(e,"attachEvent"))throw new Error("Browser not supported");N=function(e,t,n){W("adding listener "+t),e.attachEvent("on"+t,n)},R=function(e,t,n){W("removing listener "+t),e.detachEvent("on"+t,n)}}var J,V=!1,z=[];if("readyState"in t?(J=t.readyState,V="complete"==J||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==J||"interactive"==J)):V=!!t.body,!V){if(i(e,"addEventListener"))N(t,"DOMContentLoaded",u);else if(N(t,"readystatechange",function(){"complete"==t.readyState&&u()}),t.documentElement.doScroll&&e===top){var G=function(){if(!V){try{t.documentElement.doScroll("left")}catch(e){return void o(G,1)}u()}};G()}N(e,"load",u)}var $=function(e){e=e.substring(1).split("&");for(var t,n={},o=e.length;o--;)t=e[o].split("="),n[t[0]]=r(t[1]);return n}(/xdm_e=/.test(n.search)?n.search:n.hash),Q=function(){var e={},t={a:[1,2,3]},n='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===n?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===n&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=n.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(Q=function(){return e},e):null)};b(L,{version:"2.4.20.7",query:$,stack:{},apply:b,getJSONObject:Q,whenReady:f,noConflict:p}),b(L,{checkAcl:x,getDomainName:h,getLocation:m,appendQueryParameters:y});var Y={_deferred:[],flush:function(){this.trace("... deferred messages ...");for(var e=0,t=this._deferred.length;e<t;e++)this.trace(this._deferred[e]);this._deferred.length=0,this.trace("... end of deferred messages ...")},getTime:function(){var e=new Date,t=e.getHours()+"",n=e.getMinutes()+"",o=e.getSeconds()+"",r=e.getMilliseconds()+"";return 1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),r="000".substring(r.length)+r,t+":"+n+":"+o+"."+r},log:function(t){!s(e,"console")||w(console.log)?this.log=B:this.log=function(e){console.log(n.host+(j?":"+j:"")+" - "+this.getTime()+": "+e)},this.log(t)},trace:function(o){if(V){var r=t.getElementById("log");if(r)this.trace=function(e){try{r.appendChild(t.createElement("div")).appendChild(t.createTextNode(n.host+(j?":"+j:"")+" - "+this.getTime()+":"+e)),r.scrollTop=r.scrollHeight}catch(e){}};else if(s(e,"console")&&!w(console.info))this.trace=function(e){console.info(n.host+(j?":"+j:"")+" - "+this.getTime()+":"+e)};else{var a,i=n.host,c=i.replace(/[\-.:]/g,"")+"easyxdm_log";try{a=e.open("",c,"width=800,height=200,status=0,navigation=0,scrollbars=1")}catch(e){}if(a){var l=a.document;r=l.getElementById("log"),r||(l.write("<html><head><title>easyXDM log "+i+"</title></head>"),l.write('<body><div id="log"></div></body></html>'),l.close(),r=l.getElementById("log")),this.trace=function(e){try{r.appendChild(l.createElement("div")).appendChild(l.createTextNode(n.host+(j?":"+j:"")+" - "+this.getTime()+":"+e)),r.scrollTop=r.scrollHeight}catch(e){}},this.trace("---- new logger at "+n.href)}r||(this.trace=B)}this.trace(o)}else 0===this._deferred.length&&L.whenReady(Y.flush,Y),this._deferred.push(o),this.log(o)},getTracer:function(e){return function(t){Y.trace(e+": "+t)}}};M()||(Y.log=Y.trace=function(){return!1}),Y.log("easyXDM present on '"+n.href),L.Debug=Y,W=Y.getTracer("{Private}"),L.DomHelper={on:N,un:R,requiresJSON:function(n){s(e,"JSON")?Y.log("native JSON found"):(Y.log("loading external JSON"),t.write('<script type="text/javascript" src="'+n+'"></script>'))}},function(){var e={};L.Fn={set:function(t,n){this._trace("storing function "+t),e[t]=n},get:function(t,n){if(this._trace("retrieving function "+t),e.hasOwnProperty(t)){var o=e[t];return o||this._trace(t+" not found"),n&&delete e[t],o}}},L.Fn._trace=Y.getTracer("easyXDM.Fn")}(),L.Socket=function(e){Y.getTracer("easyXDM.Socket")("constructor");var t=O(_(e).concat([{incoming:function(t,n){e.onMessage(t,n)},callback:function(t){e.onReady&&e.onReady(t)}}])),n=m(e.remote);this.origin=m(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,n)},t.init()},L.Rpc=function(e,t){if(Y.getTracer("easyXDM.Rpc")("constructor"),t.local)for(var n in t.local)if(t.local.hasOwnProperty(n)){var o=t.local[n];"function"==typeof o&&(t.local[n]={method:o})}var r=O(_(e).concat([new L.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=m(e.remote),this.destroy=function(){r.destroy()},r.init()},L.stack.SameOriginTransport=function(e){var t=Y.getTracer("easyXDM.stack.SameOriginTransport");t("constructor");var r,a,i,s;return r={outgoing:function(e,t,n){i(e),n&&n()},destroy:function(){t("destroy"),a&&(a.parentNode.removeChild(a),a=null)},onDOMReady:function(){t("init"),s=m(e.remote),e.isHost?(b(e.props,{src:y(e.remote,{xdm_e:n.protocol+"//"+n.host+n.pathname,xdm_c:e.channel,xdm_p:4}),name:X+e.channel+"_provider"}),a=E(e),L.Fn.set(e.channel,function(e){return i=e,o(function(){r.up.callback(!0)},0),function(e){r.up.incoming(e,s)}})):(i=d().Fn.get(e.channel,!0)(function(e){r.up.incoming(e,s)}),o(function(){r.up.callback(!0)},0))},init:function(){f(r.onDOMReady,r)}}},L.stack.FlashTransport=function(e){function r(e){o(function(){s("received message"),c.up.incoming(e,u)},0)}function i(n){s("creating factory with SWF from "+n);var o=e.swf+"?host="+e.isHost,r="easyXDM_swf_"+Math.floor(1e4*Math.random());L.Fn.set("flash_loaded"+n.replace(/[\-.]/g,"_"),function(){L.stack.FlashTransport[n].swf=d=p.firstChild;for(var e=L.stack.FlashTransport[n].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?p="string"==typeof e.swfContainer?t.getElementById(e.swfContainer):e.swfContainer:(p=t.createElement("div"),b(p.style,S&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(p));var i="callback=flash_loaded"+a(n.replace(/[\-.]/g,"_"))+"&proto="+P.location.protocol+"&domain="+a(h(P.location.href))+"&port="+a(g(P.location.href))+"&ns="+a(j);i+="&log=true",p.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+r+"' data='"+o+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+o+"'></param><param name='flashvars' value='"+i+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+i+"' allowScriptAccess='always' wmode='transparent' src='"+o+"' height='1' width='1'></embed></object>"}var s=Y.getTracer("easyXDM.stack.FlashTransport");if(s("constructor"),!e.swf)throw new Error("Path to easyxdm.swf is missing");var c,l,u,d,p;return c={outgoing:function(t,n,o){d.postMessage(e.channel,t.toString()),o&&o()},destroy:function(){s("destroy");try{d.destroyChannel(e.channel)}catch(e){}d=null,l&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){s("init"),u=e.remote,L.Fn.set("flash_"+e.channel+"_init",function(){o(function(){s("firing onReady"),c.up.callback(!0)})}),L.Fn.set("flash_"+e.channel+"_onMessage",r),e.swf=v(e.swf);var t=h(e.swf),a=function(){L.stack.FlashTransport[t].init=!0,d=L.stack.FlashTransport[t].swf,d.createChannel(e.channel,e.secret,m(e.remote),e.isHost),e.isHost&&(S&&e.swfNoThrottle&&b(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),b(e.props,{src:y(e.remote,{xdm_e:m(n.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:X+e.channel+"_provider"}),l=E(e))};L.stack.FlashTransport[t]&&L.stack.FlashTransport[t].init?a():L.stack.FlashTransport[t]?L.stack.FlashTransport[t].queue.push(a):(L.stack.FlashTransport[t]={queue:[a]},i(t))},init:function(){f(c.onDOMReady,c)}}},L.stack.PostMessageTransport=function(t){function r(e){if(e.origin)return m(e.origin);if(e.uri)return m(e.uri);if(e.domain)return n.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function a(e){if("string"==typeof e.data){var n=r(e);s("received message '"+e.data+"' from "+n),n==d&&e.data.substring(0,t.channel.length+1)==t.channel+" "&&c.up.incoming(e.data.substring(t.channel.length+1),n)}}function i(n){n.data==t.channel+"-ready"&&(s("firing onReady"),u="postMessage"in l.contentWindow?l.contentWindow:l.contentWindow.document,R(e,"message",i),N(e,"message",a),o(function(){c.up.callback(!0)},0))}var s=Y.getTracer("easyXDM.stack.PostMessageTransport");s("constructor");var c,l,u,d;return c={outgoing:function(e,n,o){u.postMessage(t.channel+" "+e,n||d),o&&o()},destroy:function(){s("destroy"),R(e,"message",i),R(e,"message",a),l&&(u=null,l.parentNode.removeChild(l),l=null)},onDOMReady:function(){s("init"),d=m(t.remote),t.isHost?(N(e,"message",i),b(t.props,{src:y(t.remote,{xdm_e:m(n.href),xdm_c:t.channel,xdm_p:1}),name:X+t.channel+"_provider"}),l=E(t)):(N(e,"message",a),u="postMessage"in e.parent?e.parent:e.parent.document,u.postMessage(t.channel+"-ready",d),o(function(){c.up.callback(!0)},0))},init:function(){f(c.onDOMReady,c)}}},L.stack.FrameElementTransport=function(r){var a=Y.getTracer("easyXDM.stack.FrameElementTransport");a("constructor");var i,s,c,l;return i={outgoing:function(e,t,n){c.call(this,e),n&&n()},destroy:function(){a("destroy"),s&&(s.parentNode.removeChild(s),s=null)},onDOMReady:function(){a("init"),l=m(r.remote),r.isHost?(b(r.props,{src:y(r.remote,{xdm_e:m(n.href),xdm_c:r.channel,xdm_p:5}),name:X+r.channel+"_provider"}),s=E(r),s.fn=function(e){return delete s.fn,c=e,o(function(){i.up.callback(!0)},0),function(e){i.up.incoming(e,l)}}):(t.referrer&&m(t.referrer)!=$.xdm_e&&(e.top.location=$.xdm_e),c=e.frameElement.fn(function(e){i.up.incoming(e,l)}),i.up.callback(!0))},init:function(){f(i.onDOMReady,i)}}},L.stack.NameTransport=function(e){function t(t){var n=e.remoteHelper+(c?"#_3":"#_2")+e.channel;i("sending message "+t),i("navigating to  '"+n+"'"),l.contentWindow.sendMessage(t,n)}function n(){c?2!=++d&&c||s.up.callback(!0):(t("ready"),i("calling onReady"),s.up.callback(!0))}function r(e){i("received message "+e),s.up.incoming(e,h)}function a(){p&&o(function(){p(!0)},0)}var i=Y.getTracer("easyXDM.stack.NameTransport");if(i("constructor"),e.isHost&&w(e.remoteHelper))throw i("missing remoteHelper"),new Error("missing remoteHelper");var s,c,l,u,d,p,h,g;return s={outgoing:function(e,n,o){p=o,t(e)},destroy:function(){i("destroy"),l.parentNode.removeChild(l),l=null,c&&(u.parentNode.removeChild(u),u=null)},onDOMReady:function(){i("init"),c=e.isHost,d=0,h=m(e.remote),e.local=v(e.local),c?(L.Fn.set(e.channel,function(t){i("received initial message "+t),c&&"ready"===t&&(L.Fn.set(e.channel,r),n())}),g=y(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),b(e.props,{src:g+"#"+e.channel,name:X+e.channel+"_provider"}),u=E(e)):(e.remoteHelper=e.remote,L.Fn.set(e.channel,r));var t=function(){var r=l||this;R(r,"load",t),L.Fn.set(e.channel+"_load",a),function e(){"function"==typeof r.contentWindow.sendMessage?n():o(e,50)}()};l=E({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){f(s.onDOMReady,s)}}},L.stack.HashTransport=function(t){function n(e){if(s("sending message '"+(h+1)+" "+e+"' to "+w),!v)return void s("no caller window");var n=t.remote+"#"+h+++"_"+e;(l||!y?v.contentWindow:v).location=n}function r(e){p=e,s("received message '"+p+"' from "+w),c.up.incoming(p.substring(p.indexOf("_")+1),w)}function a(){if(g){var e=g.location.href,t="",n=e.indexOf("#");-1!=n&&(t=e.substring(n)),t&&t!=p&&(s("poll: new message"),r(t))}}function i(){s("starting polling"),u=setInterval(a,d)}var s=Y.getTracer("easyXDM.stack.HashTransport");s("constructor");var c,l,u,d,p,h,g,v,y,w;return c={outgoing:function(e){n(e)},destroy:function(){e.clearInterval(u),!l&&y||v.parentNode.removeChild(v),v=null},onDOMReady:function(){if(l=t.isHost,d=t.interval,p="#"+t.channel,h=0,y=t.useParent,w=m(t.remote),l){if(b(t.props,{src:t.remote,name:X+t.channel+"_provider"}),y)t.onLoad=function(){g=e,i(),c.up.callback(!0)};else{var n=0,r=t.delay/50;!function e(){if(++n>r)throw s("unable to get reference to _listenerWindow, giving up"),new Error("Unable to reference listenerwindow");try{g=v.contentWindow.frames[X+t.channel+"_consumer"]}catch(e){}g?(i(),s("got a reference to _listenerWindow"),c.up.callback(!0)):o(e,50)}()}v=E(t)}else g=e,i(),y?(v=parent,c.up.callback(!0)):(b(t,{props:{src:t.remote+"#"+t.channel+new Date,name:X+t.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),v=E(t))},init:function(){f(c.onDOMReady,c)}}},L.stack.ReliableBehavior=function(){var e=Y.getTracer("easyXDM.stack.ReliableBehavior");e("constructor");var t,n,o=0,r=0,a="";return t={incoming:function(i,s){e("incoming: "+i);var c=i.indexOf("_"),l=i.substring(0,c).split(",");i=i.substring(c+1),l[0]==o&&(e("message delivered"),a="",n&&n(!0)),i.length>0&&(e("sending ack, and passing on "+i),t.down.outgoing(l[1]+","+o+"_"+a,s),r!=l[1]&&(r=l[1],t.up.incoming(i,s)))},outgoing:function(e,i,s){a=e,n=s,t.down.outgoing(r+","+ ++o+"_"+e,i)}}},L.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===c.length)return n("removing myself from the stack"),void T(i);if(!l&&0!==c.length&&!s){n("dispatching from queue"),l=!0;var r=c.shift();i.down.outgoing(r.data,r.origin,function(e){l=!1,r.callback&&o(function(){r.callback(e)},0),t()})}}var n=Y.getTracer("easyXDM.stack.QueueBehavior");n("constructor");var i,s,c=[],l=!0,u="",f=0,d=!1,p=!1;return i={init:function(){w(e)&&(e={}),e.maxLength&&(f=e.maxLength,p=!0),e.lazy?d=!0:i.down.init()},callback:function(e){l=!1;var n=i.up;t(),n.callback(e)},incoming:function(t,o){if(p){var a=t.indexOf("_"),s=parseInt(t.substring(0,a),10);u+=t.substring(a+1),0===s?(n("received the last fragment"),e.encode&&(u=r(u)),i.up.incoming(u,o),u=""):n("waiting for more fragments, seq="+t)}else i.up.incoming(t,o)},outgoing:function(o,r,s){e.encode&&(o=a(o));var l,u=[];if(p){for(;0!==o.length;)l=o.substring(0,f),o=o.substring(l.length),u.push(l);for(;l=u.shift();)n("enqueuing"),c.push({data:u.length+"_"+l,origin:r,callback:0===u.length?s:null})}else c.push({data:o,origin:r,callback:s});d?i.down.init():t()},destroy:function(){n("destroy"),s=!0,i.down.destroy()}}},L.stack.VerifyBehavior=function(e){function t(){n("requesting verification"),r=Math.random().toString(16).substring(2),o.down.outgoing(r)}var n=Y.getTracer("easyXDM.stack.VerifyBehavior");if(n("constructor"),w(e.initiate))throw new Error("settings.initiate is not set");var o,r,a;return o={incoming:function(i,s){var c=i.indexOf("_");-1===c?i===r?(n("verified, calling callback"),o.up.callback(!0)):a||(n("returning secret"),a=i,e.initiate||t(),o.down.outgoing(i)):i.substring(0,c)===a&&o.up.incoming(i.substring(c+1),s)},outgoing:function(e,t,n){o.down.outgoing(r+"_"+e,t,n)},callback:function(){e.initiate&&t()}}},L.stack.RpcBehavior=function(e,t){function n(e){e.jsonrpc="2.0",a.down.outgoing(s.stringify(e))}function o(e,t){var o=Array.prototype.slice;return i("creating method "+t),function(){i("executing method "+t);var r,a=arguments.length,s={method:t};a>0&&"function"==typeof arguments[a-1]?(a>1&&"function"==typeof arguments[a-2]?(r={success:arguments[a-2],error:arguments[a-1]},s.params=o.call(arguments,0,a-2)):(r={success:arguments[a-1]},s.params=o.call(arguments,0,a-1)),u[""+ ++l]=r,s.id=l):s.params=o.call(arguments,0),e.namedParams&&1===s.params.length&&(s.params=s.params[0]),n(s)}}function r(e,t,o,r){if(!o)return i("requested to execute non-existent procedure "+e),void(t&&n({id:t,error:{code:-32601,message:"Procedure not found."}}));i("requested to execute procedure "+e);var a,s;t?(a=function(e){a=B,n({id:t,result:e})},s=function(e,o){s=B;var r={id:t,error:{code:-32099,message:e}};o&&(r.error.data=o),n(r)}):a=s=B,c(r)||(r=[r]);try{var l=o.method.apply(o.scope,r.concat([a,s]));w(l)||a(l)}catch(e){s(e.message)}}var a,i=Y.getTracer("easyXDM.stack.RpcBehavior"),s=t.serializer||Q(),l=0,u={};return a={incoming:function(e){var o=s.parse(e);if(o.method)i("received request to execute method "+o.method+(o.id?" using callback id "+o.id:"")),t.handle?t.handle(o,n):r(o.method,o.id,t.local[o.method],o.params);else{i("received return value destined to callback with id "+o.id);var a=u[o.id];o.error?a.error?a.error(o.error):i("unhandled error returned."):a.success&&a.success(o.result),delete u[o.id]}},init:function(){if(i("init"),t.remote){i("creating stubs");for(var n in t.remote)t.remote.hasOwnProperty(n)&&(e[n]=o(t.remote[n],n))}a.down.init()},destroy:function(){i("destroy");for(var n in t.remote)t.remote.hasOwnProperty(n)&&e.hasOwnProperty(n)&&delete e[n];a.down.destroy()}}},P.easyXDM=L}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),cloudspongeUI={};var csUtils=function(){var e=function(){var e,t,n,o=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"OE",letters:"\x8c\u0152"},{base:"oe",letters:"\x9c\u0153"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],r={};for(t=0;t<o.length;t++)for(e=o[t].letters,n=0;n<e.length;n++)r[e[n]]=o[t].base;return r}();return{getOption:function(e){if("undefined"!=typeof cloudspongeUI.controller.options)return cloudspongeUI.controller.options[e]},mixin:function(e,t){e=e||{},t=t||{};for(var n=Object.keys(t),o=0,r=n.length;o<r;o++)e[n[o]]=t[n[o]];return e},mixinOptions:function(e){cloudspongeUI.controller.init(e)},triggerCallback:function(e){var t;if("function"==typeof cloudspongeUI.controller.options[e])try{t=cloudspongeUI.controller.options[e].apply(null,[].slice.call(arguments,1))}catch(e){console.error(e)}return t},trackPage:function(e,t){cloudspongeUI.controller.trackPage(e,t)},trackEvent:function(e,t){if(cloudspongeUI.controller.options.gaTrackEvents&&"function"==typeof ga)try{ga("send",csUtils.mixin({hitType:"event",eventCategory:"CloudSponge Widget",eventAction:e},t))}catch(e){console.error(e)}cloudspongeUI.controller.trackEvent(e,t)},truncate:function(e,t){return e.length>t?e.slice(0,t)+"...":e},fillStr:function(e,t){for(var n,o="",r=0,a=0;(n=e.indexOf("${",++n))>-1;)if(o+=e.slice(r,n),r=e.indexOf("}",n)+1){var i=e.slice(n+2,r-1);"undefined"!=typeof t[i]?o+=t[i]:"undefined"!=typeof t[a]?o+=t[a]:o+="${"+i+"}",a++}else r=n;return o+=e.slice(r)},setHTML:function(e,t){var n;if(e.length)for(var n in e)e[n].innerHTML=t;else e.innerHTML=t},getById:function(e){return document.getElementById(e)},getByClassName:function(e){var t=e,n=1,o=[];"string"==typeof t&&(n=0,t=document);for(var r=arguments.length;n<r;n++)o.push.apply(o,t.getElementsByClassName(arguments[n]));return o},getBySel:function(e,t){return"string"==typeof e?document.querySelectorAll(e):e.querySelectorAll(t)},getByTag:function(e,t){return"string"==typeof e?document.getElementsByTagName(e):e.getElementsByTagName(t)},getText:function(e){return e.textContent||e.innerText},showElement:function(e){"string"==typeof e&&(e=csUtils.getById(e)),e.style.display=""},hideElement:function(e){"string"==typeof e&&(e=csUtils.getById(e)),e.style.display="none"},isHidden:function(e){return"none"==e.style.display},scrollElementY:function(e,t,n){var o=e.scrollTop,r=Math.abs(t-o),a=Math.ceil(r/10);t<o?function r(){o-=a,e.scrollTop=o,t<o?setTimeout(r,10):(e.scrollTop=t,n())}():function r(){o+=a,e.scrollTop=o,o<t?setTimeout(r,10):(e.scrollTop=t,n())}()},delegate:function(e,t){return function(n){for(var o=n.target;this!==o&&!e(o);)o=o.parentNode;this!==o&&t.call(o,n)
}},trim:function(e){return null!=e?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},filterBlank:function(e){if(e==undefined)return[];"string"==typeof e&&(e=e.split(" "));for(var t=[],n=0;n<e.length;n++)""!=e[n]&&t.push(e[n]);return t},searchInArray:function(e,t){if(e&&e.length&&e.length>0)for(var n=e.length;n--;)if(0==csUtils.removeAccents(e[n]).toLowerCase().lastIndexOf(t,0))return!0},hasClass:function(e,t){domClasses=csUtils.filterBlank(e.className);for(var n=0;n<domClasses.length;n++)if(domClasses[n]==t)return!0;return!1},addClass:function(e,t){if(!csUtils.hasClass(e,t)){var n=csUtils.filterBlank(e.className);n.push(t),e.className=n.join(" ")}},removeClass:function(e,t){if(csUtils.hasClass(e,t)){for(var n=csUtils.filterBlank(e.className),o=[],r=0;r<n.length;r++)n[r]!=t&&o.push(n[r]);e.className=o.join(" ")}},addEvent:function(e,t,n,o){"undefined"!=typeof e.addEventListener?e.addEventListener(t,n,!!o):"undefined"!=typeof e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeEvent:function(e,t,n){"undefined"!=typeof e.removeEventListener?e.removeEventListener(t,n,!1):"undefined"!=typeof e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},preventDefault:function(e){null!=e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},fetchJSON:function(e,t){var n=new XMLHttpRequest;n.onload=function(){try{t(JSON.parse(n.responseText))}catch(e){t({}),console.error(e)}},n.open("GET",e,!0),n.send()},createCORSRequest:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n},removeAccents:function(t){if(t)return t.replace(/[^\u0000-\u007E]/g,function(t){return e[t]||t})},escapeHtml:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})},applyContactMethods:function(e){var t,n={selectedEmail:function(){var e;if(null!==this.email&&"undefined"!=typeof this.email)for(e=0;e<this.email.length;e++)if(this.email[e].selected)return this.email[e].address;return this.primaryEmail&&this.primaryEmail()},primaryEmail:function(){return null!==this.email&&"undefined"!=typeof this.email&&null!==this.email[0]&&"undefined"!=typeof this.email[0]?this.email[0].address:""},fullName:function(){return(this.first_name||"")+" "+(this.last_name||"")},hasValidEmail:function(){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.email.filter(function(t){if(e.test(t.address))return t}).length>0}};for(t=0;t<e.length;t++)for(var o in n)o&&(e[t][o]=n[o]);return e},filterNullEmailContacts:function(e){return e.map(function(e){return e.email=e.email.filter(function(e){if(e.address)return e}),e})},copyObj:function(e){switch(function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)){case"Array":var t,n=new Array,o=e.length;for(t=0;t<o;t++)n[t]=csUtils.copyObj(e[t]);return n;case"Object":var r,n=new Object;for(r in e)n[r]=csUtils.copyObj(e[r]);return n;default:return e}}}}();cloudspongeUI.utils=csUtils,csAnalytics=function(){function e(e,t){e=e||{},t=t||{};for(var n=Object.keys(t),o=0,r=n.length;o<r;o++)e[n[o]]=t[n[o]];return e}function t(){return o()&&window[window.GoogleAnalyticsObject]}function n(){return!!window._gaq}function o(){return!!window.GoogleAnalyticsObject}function r(e,t,n,o,r,a,i){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,a=t.createElement(n),i=t.getElementsByTagName(n)[0],a.async=1,a.src=o,i.parentNode.insertBefore(a,i)}function a(){try{"function"==typeof csCollect&&csCollect.apply(this,arguments)}catch(e){console&&console.error(e)}try{if(o())if("function"==typeof arguments[0]){var e=arguments[0];t().call(this,function(){var t=ga.getByName(c);e.call(this,t)})}else"create"!=arguments[0]&&(arguments[0]=c+"."+arguments[0]),t().apply(this,arguments)}catch(e){console&&console.error(e)}}var i=!1,s=["onSourceSelected","onImportComplete","onBeforeDisplayContacts","onContactsSubmitted"],c="cloudsponge";return{init:function(e,t){function s(e){function n(e){var t,n,o=1;if(e)for(o=0,n=e.length-1;0<=n;n--)t=e.charCodeAt(n),o=(o<<6&268435455)+t+(t<<14),t=266338304&o,o=0!=t?o^t>>21:o;return o}return e=e||(new Date).valueOf().toString(),!!t&&(!t.hasOwnProperty("loadSampleRate")||n(e)%1e4<=100*t.loadSampleRate)}function l(){o()||n()||r(window,document,"script","//www.google-analytics.com/analytics.js","ga"),opts=e||{},opts.cookieDomain=opts.cookieDomain||"auto",t=t||{},c=opts.name,a("create",opts),a("set","dimension1",t.key),a("set","dimension2",t.version),a("set","appName",t.appName),a("set","appVersion",t.version),opts.alwaysSendReferrer&&a("set","referrer",window.location.toString()),t.loadPage&&(a("set","location",t.loadPage),a("set","title",t.title||"hidden"),s()&&csAnalytics.trackPage(t.loadPage,t.title||"hidden"))}i||(i=!0,t.shared&&"complete"!=document.readyState?window.addEventListener?window.addEventListener("load",function(){l()}):window.attachEvent&&window.attachEvent("onload",l):l())},trackPage:function(e,t){a("send","pageview",{title:t,page:e})},trackEvent:function(t,n){s.indexOf(t)<0||(n=e({eventCategory:"Widget",eventAction:t},n),"onSourceSelected"==n.eventAction?(a("set","dimension3",n.eventValue),delete n.eventValue):"onImportComplete"==n.eventAction?a("set","metric1",n.eventValue):"onBeforeDisplayContacts"==n.eventAction?n.eventValue?(n.eventValue=1,a("set","dimension4","share enabled")):(n.eventValue=0,a("set","dimension4","share suppressed")):"onContactsSubmitted"==n.eventAction&&a("set","metric2",n.eventValue),a("send","event",n))}}}(),window.isCSProvider=!0,function(){function e(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function t(e,t){"undefined"!=typeof easyXDM.Debug&&"undefined"!=typeof easyXDM.Debug.log&&easyXDM.Debug.log(e+": "+t)}function n(e){t("WARN","Util: "+e)}function o(e){t("LOG","Util: "+e)}function r(e,t){var n,o,r=null,a=e.slice(1).split("&");for(n=0;n<a.length;n++)if(o=a[n].split("="),o[0]===t){r=o[1];break}return r}window.easyXDM=easyXDM.noConflict("cloudsponge"),easyXDM.DomHelper.requiresJSON(window.location.protocol+"//"+window.location.host+'#{javascript_path("address_books/json2")}');var a,i;if(e(window,"addEventListener"))a=function(e,t,n){e.addEventListener(t,n,!1)},i=function(e,t,n){e.removeEventListener(t,n,!1)};else{if(!e(window,"attachEvent"))throw new Error("Browser not supported");a=function(e,t,n){e.attachEvent("on"+t,n)},i=function(e,t,n){e.detachEvent("on"+t,n)}}window.util={on:a,un:i,queryValue:r,warn:n,log:o,isHostMethod:e}}(),function(){function e(e){var t;if(window.util.isHostMethod(e,"addEventListener"))t=function(e,t,n){e.addEventListener(t,n,!1)};else{if(!window.util.isHostMethod(e,"attachEvent"))throw new Error("Browser not supported");t=function(e,t,n){e.attachEvent("on"+t,n)}}return t}function t(e){var t;if(window.util.isHostMethod(e,"addEventListener"))t=function(e,t,n){e.removeEventListener(t,n,!1)};else{if(!window.util.isHostMethod(e,"attachEvent"))throw new Error("Browser not supported");t=function(e,t,n){e.detachEvent("on"+t,n)}}return t}function n(e,t){"undefined"!=typeof easyXDM.Debug&&"undefined"!=typeof easyXDM.Debug.log&&easyXDM.Debug.log(e+": "+t)}function o(e){n("WARN","Provider: "+e)}function r(e){n("LOG","Provider: "+e)}function a(e){r("Unregistering "+e),delete y[e],f("unregister",e),delete w.register[e],delete w.unregister[e]}function i(e){return"string"==typeof e?y[e]:e}function s(e,t){var n=i(e),o=null;return n&&(o=n[t]),o}function c(e,t){"undefined"!=typeof e[t]&&null!==e[t]||(e[t]=[])}function l(e,t,n,o){c(e,t),e[t].push({monitor:o,contextName:n})}function u(e,t,n,o){r("Removing monitor for "+e+" from "+t+" with context "+n);var a,i,s=w[t][e];if(!p(s)){for(a=0;a<s.length&&(i=s[a],i.monitor!==o||i.contextName!==n);a++);if(a>=0)return s.splice(a,1);r("Unable to find specified monitor.")}}function f(e,t){var n,o,a;if(r("Executing "+e+" monitors for "+t),!p(w[e])&&(o=w[e][t],!p(o)))for(;o.length>0;)n=o.pop(),r("Executing "+e+" monitor for "+t+" in the context of "+n.contextName),a=g(n.contextName),d(a,n.monitor)}function d(e,t){var n=e;if("string"==typeof n&&(n=i(n)),n){if(r("Executing function within the context of "+n.name),"string"==typeof t&&n[t])return tryExec(n[t]);try{return t(n)}catch(e){if(e instanceof TypeError&&"undefined_method"===e.type)return o("Unable to successfully execute"),!1;throw e}return!0}return r("Unable to find entity with name "+n),!1}function p(e){return void 0===e||null===e}function h(){function e(e){try{return!!e&&!e.closed}catch(e){return!0}}var t,n=0;for(t in y)y.hasOwnProperty(t)&&(n++,e(i(t))||a(t));0===n&&(clearTimeout(m),m=null)}function g(e){var t=window;return p(e)||(t=i(e)),t}var m,v={},y={},w={register:{},unregister:{},remove:{}};v.redirect_widget=function(e,t){var n=i(t);n&&(n.location=e)},v.register=function(e,t){y[t]=e,c(w.register,t),c(w.unregister,t),f("register",t),p(m)&&(m=window.setInterval(h,500))},v.unregister=a,v.handle=i,v.WIDGET="cs_container_frame",v.monitor=function(e,t,n,o){"register"!==t||p(i(e))?(r("Saving monitor: will execute monitor on "+n+" when "+e+" "+t+"s"),l(w[t],e,n,o)):d(g(n),o)},v.unmonitor=u,v.entityOn=function(t,n,o,r){var a=i(t),c=s(a,n);a&&c&&e(a)(c,o,r)},v.entityUn=function(e,n,o,r){var a=i(e),c=s(a,n);a&&c&&t(a)(c,o,r)},v.exec=d,v.pageOptions={},v.onAfterImport=function(e,t){t.then;window.rpc&&window.rpc.afterImport(e,t.success,t.errorCode),t.then&&setTimeout(t.then,500)},window.channel=v}(),function(){function e(e){var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),t.parentNode.insertBefore(n,t)}var t=0,n=!1;!function o(){if(n||window.JSON!==undefined||(e(window.location.protocol+"//"+window.location.host+"/assets/address_books/json2-fa80da7cd38bb47981bb45f0b7e4a3d4710ed53cb980f33f300162a5d69f8ecd.js"),n=!0),window.JSON!==undefined)try{var r={onReady:function(){rpc.getOptions(function(e){channel.pageOptions=e})}},a=window.util.queryValue(window.location.search,"swf");a&&(r.swf=a),window.rpc=new easyXDM.Rpc(r,{local:{updateOptions:function(e,t){var n=e.options||e,o=e.version||"1.1";channel.pageOptions=n,csAnalytics.init({trackingId:"UA-82373714-2",sampleRate:100,name:"cloudspongeChannel"},{key:n.key||n.domain_key,version:o,appName:"CloudSponge Widget",loadPage:"/load",loadSampleRate:0}),t&&t()},unloadFrame:function(){popup.close()},getRpcLocation:function(e){e({search:window.location.search,host:window.location.host,href:window.location.href})},frameName:function(){return window.name},selectFile:function(){var e,t;(e=channel.handle(channel.WIDGET))&&(t=e.document.getElementById("fileupload"))&&t.csv_file.click()},getFileUpload:function(e,t){var n;(n=channel.handle(channel.WIDGET))?e(n.location.href.replace("wait?","auth?")):t("unable to find widget")},loadWidgetUrl:function(e){var t=channel.handle(channel.WIDGET);t&&(t.location=e)},login:function(e){var t,n;(t=channel.handle(channel.WIDGET))&&(n=t.document.getElementById("webmail_auth"))&&(n.credentials_username.value=e.username,n.credentials_password.value=e.password,n.submit())},trackEvent:function(e,t){csAnalytics.trackEvent(e,t)},trackPage:function(e,t){csAnalytics.trackPage(e,t)}},remote:{getOptions:{},beforeImport:{},afterImport:{},beforeDisplayContacts:{},afterSubmitContacts:{},afterClose:{},closePopup:{},afterClosePopup:{},resizeFrame:{},_onPageLoaded:{},_onUpdate:{},_setFormAction:{}}})}catch(e){window.console!==undefined&&console.error("rpc channel could not be created: "+e)}else t++<20?setTimeout(o,250):window.console!==undefined&&console.error("Provider unable to load easyXDM, cannot initialize widget.")}()}(),window.popup=function(){var e=null,t=function(){return!e&&channel.handle("_csimport")&&(e=channel.handle("_csimport")),e};return{focus:function(){if(t())try{e.focus()}catch(e){}},close:function(){rpc.closePopup(function(n){if(!n&&t())try{!e.closed&&e.close()}catch(e){}}),e=null},ending:function(e){try{if(e&&e.provider&&e.provider.channel&&e.provider.channel.pageOptions.skipSourceMenu)return e.provider.rpc.afterClose(),!1;e.provider.rpc.afterClosePopup();var t=channel.handle(channel.WIDGET).location.pathname.match(/\/([^/]+)\/(consent|import)$/);t&&"consent"==t[2]&&rpc.afterImport(t[1],!1,514),e.location="/address_books"+e.location.search}catch(e){}}}}(),function(){window.afterSubmitContacts=function(){}}.call(this);